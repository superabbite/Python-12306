Python 12306 更新记录
-----------------


**2019.1.10**

    1. 初始化提交
    2. 完成自动登录,查询,下单流程,下单成功邮箱通知
    3. 优化部分log信息提示


**2019.1.11**

    1. 更新查询到的数据按照余票信息排列
    2. 优化提示信息显示
    3. 配置项增加query_left_ticket_time, 查询余票的时间间隔配置
    4. 修改运行文件名称为mainloop.py,不再为test.py文件名
    5. 添加检测登录状态功能,如果状态检测失败的话,重新打码登录.(开启了自动打码情况有效)


**2019.1.12**

    1. 添加加入小黑屋逻辑
    2. 所有之前导出pickle文件的操作均在程序启动前检查并生成
    3. 添加12306维护时间检查
    4. 更改提交订单的判断逻辑


**2019.1.13**

    1. 添加预售模式, 具体配置可参考配置文件的内容进行操作
    2. 修改为多日期查询
    3. 添加详细订单信息打印

**2019.1.14**

    1. 添加setup.py文件,可以使用pip命令进行安装命令
    2. 优化部分逻辑
    3. 更新了日期查询为多日期, 需要修改对应的配置项为列表

使用命令运行程序

```
使用命令 pip install git+https://github.com/versionzhang/python_12306@master
即可安装此项目，项目会生成py12306的命令
在你需要运行的文件夹内创建config.yaml，编辑好配置文件即可使用
```

**2019.1.16 添加多线程支持**

配置项添加这两个配置
```
# 在线检查时间间隔, 单位秒, 整数
online_check_time: 120

# 是否开启多线程查票
# 不开启多线程查票的话, 多日期的查询是串行的, 开启多线程查询多个日期的查询模式是并行的
# 但是多线程对12306是并发请求的,有可能会导致ip被12306暂时封禁. 这个捡漏的时候可以试一下看看效果
# 预售的时候就暂时不要启用这个选项,会影响你的登录状态,如果被12306视为异常你的登录就会失效, 需要
# 重新登录
multi_threading_enable: False
```

**2019.1.16 添加CDN支持**

```
cdn检测放在程序刚运行时候进行检测, 大概需要10分钟才能检测完毕
```

**2019.1.17 添加多组出发目的地配置**

```
相关的配置项目有修改,请查看下面的几个配置项以及`config.yaml_example`

  # 出发城市列表 只用填写城市名称即可, 比如深圳北，就填深圳就搜得到
  from_stations:
    - "广州"
    - "深圳"

  # 到达城市列表 只用填写城市名称即可, 比如深圳北，就填深圳就搜得到
  to_stations:
    - "郑州"
    - "洛阳"

  # 是否使用车站组, 如果使用车站组, 站点的内容设置的为下面的分组信息, 不使用的话则使用上面的设置, 即
  # from_stations与to_stations的直积, 出发地为[A, B] 到达为[C, D], 则产生的结果为
  # [('A', 'C'), ('A', 'D'), ('B', 'C'), ('B', 'D')]
  # 注意不要配置太多的选项, 配置太多则产生的组合也很多, 组合数为车站出发到达的组合数 * 日期数
  # 处理的优先顺序为日期优先, 例如["DAY1", "DAY2"] 与 [('A', 'C'), ('A', 'D')] 生成的结果为
  # [('DAY1', ('A', 'C')),
  #  ('DAY1', ('A', 'D')),
  #  ('DAY2', ('A', 'C')),
  #  ('DAY2', ('A', 'D'))]
  use_station_group: True

  station_groups:
    # 出发
    - from_station: "郑州"
    # 到达
      to_station: "深圳"
    - from_station: "郑州"
      to_station:  "广州"
    - from_station: "郑州"
      to_station:  "珠海"
```

**2019.1.17 添加是否保存图片在本地的配置项, 添加微信通知**

```
auto_code_enable: False
# 是否保存图片在当前文件夹内，如果开启则直接保存图片到当前文件夹内
# 如果不开启则直接前台显示图片
save_img_enable: True

# 是否开启微信通知
weixin_notice_enable: True
# server酱key
weixin_sckey: server酱key
```


**2019.3.25 添加免费打码平台**

使用[https://12306.jiedanba.cn/](https://12306.jiedanba.cn/)免费打码
具体配置文件内修改配置项

```
auto_code_method: freeapi
```

**2019.4.1 添加使用selenium(使用chrome driver)进行获取完整的cookie**

```
由于12306添加了设备指纹的识别,所以传统的登录请求直接去登录是失败率极高,所以现在采用的是selenium去获取对应的设备指纹.
需要更新依赖包,然后配置selenium,具体的配置可以参考网上的教程.
代码里面使用的无头浏览器是chrome.
```

**2019.4.4 优化部分提示信息**

```
优化部分提示信息
```
